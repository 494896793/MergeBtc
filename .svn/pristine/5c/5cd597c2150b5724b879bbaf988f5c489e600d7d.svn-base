package com.bochat.app.app.activity.dynamic;

import android.os.Bundle;
import android.widget.TextView;

import com.alibaba.android.arouter.facade.annotation.Route;
import com.bochat.app.R;
import com.bochat.app.app.view.BoChatTopBar;
import com.bochat.app.app.view.ShareDialog;
import com.bochat.app.common.contract.dynamic.DynamicFlashDetialContract;
import com.bochat.app.common.router.RouterDynamicFlashDetail;
import com.bochat.app.model.bean.DynamicFlashEntity;
import com.bochat.app.mvp.view.BaseActivity;

import java.nio.file.Path;

import javax.inject.Inject;

import butterknife.BindView;

/**
 * create by guoying ${Date} and ${Month}
 */
@Route(path = RouterDynamicFlashDetail.PATH)
public class DynamicFlashDetialAcitvity extends BaseActivity<DynamicFlashDetialContract.Presenter> implements DynamicFlashDetialContract.View {
    @BindView(R.id.dynamic_flash_bochat_bar)
    BoChatTopBar boChatTopBar;
    @BindView(R.id.detail_rise)
    TextView riseText;
    @BindView(R.id.detail_decline)
    TextView declineText;
    @BindView(R.id.flash_detail_title)
    TextView title;
    @BindView(R.id.flash_detail_content)
    TextView content;
    @BindView(R.id.flash_date)
    TextView date;
    @Inject
    DynamicFlashDetialContract.Presenter presenter;

    @Override
    protected void initInjector() {
        getActivityComponent().inject(this);
    }

    @Override
    protected DynamicFlashDetialContract.Presenter initPresenter() {
        return presenter;
    }

    @Override
    protected void setRootView(Bundle savedInstanceState) {
        setContentView(R.layout.acitivity_dynamic_flash_detail);
    }

    @Override
    protected void initWidget() {
        super.initWidget();
        boChatTopBar.setOnClickListener(new BoChatTopBar.OnClickListener() {
            @Override
            public void onRightExtButtonClick() {
                presenter.onShareClick();
            }
        });
    }

    @Override
    public void onUpdateView(DynamicFlashEntity entity) {
        riseText.setText("利好"+entity.getAdmire());
        declineText.setText("利空"+entity.getTrample());
        title.setText(entity.getTitle());
        content.setText(entity.getContent());
        date.setText(entity.getCreateTime());
    }

    @Override
    public void showShareDialog(String shareUrl) {
        ShareDialog shareDialog = new ShareDialog(this, "邀请有礼", "邀请链接 [点击复制]", shareUrl);
        shareDialog.showPopupWindow();
    }
}

package com.bochat.app.business.main.bill;

import android.content.Intent;

import com.alibaba.android.arouter.launcher.ARouter;
import com.bochat.app.app.RouteExtra;
import com.bochat.app.business.DaggerBusinessComponent;
import com.bochat.app.common.contract.bill.TokenTransferSelectCoinContract;
import com.bochat.app.model.bean.UserCurrencyDataEntity;
import com.bochat.app.model.bean.UserCurrencyEntity;
import com.bochat.app.mvp.presenter.BasePresenter;


/**
 * Author      : FJ
 * CreateDate  : 2019/4/26 0026 16:15
 * Description :
 */
public class TokenTransferSelectCoinPresenter extends BasePresenter<TokenTransferSelectCoinContract.View> implements TokenTransferSelectCoinContract.Presenter {

    UserCurrencyDataEntity userCurrencyDataEntity;
    UserCurrencyEntity userCurrencyEntity;
    String returnUrl;
    
    @Override
    public void initInjector() {
        DaggerBusinessComponent.create().inject(this);
    }

    @Override
    public void onViewRefresh() {
        super.onViewRefresh();
        Intent viewIntent = getView().getViewIntent();
        if(viewIntent.hasExtra(RouteExtra.UserCurrencyEntity)){
            userCurrencyEntity = (UserCurrencyEntity)viewIntent.getSerializableExtra(RouteExtra.UserCurrencyEntity);
        }
        if (viewIntent.hasExtra(RouteExtra.UserCurrencyDataEntity)) {
            userCurrencyDataEntity = (UserCurrencyDataEntity)viewIntent.getSerializableExtra(RouteExtra.UserCurrencyDataEntity);
            getView().updateList(userCurrencyDataEntity.getData(), userCurrencyEntity);
        }
        if (viewIntent.hasExtra(RouteExtra.ReturnUrl)) {
            returnUrl = viewIntent.getStringExtra(RouteExtra.ReturnUrl);
        }
    }

    @Override
    public void onItemClick(UserCurrencyEntity data) {
        if(returnUrl != null){
            ARouter.getInstance().build(returnUrl).withSerializable(RouteExtra.UserCurrencyEntity, data).navigation();
        }
    }
}
